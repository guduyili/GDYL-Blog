---
title: Picture Bed
date: 2024-10-15 
updated: 2024-11-6 
categories: 
- Picture Bed
tag:
- learning
---

<!-- toc -->

## 前言

在制作个人博客的过程中发现将使用hexo主题的博客托管到Vercel上面时候，图片不能正常显示，因此萌生做图床的想法，

本文

- 一为如何在云服务器上面配置图床

- 二是如何使用给云服务器配置ssl





## 1.图床配置

### 1.1安装Nginx

**1.更新包管理器并安装 Nginx**：

```bash
sudo apt update
sudo apt install nginx
```

**2.启动 Nginx 并将其设置为开机启动**：

```bash
sudo systemctl start nginx
sudo systemctl enable nginx
```

**3.检查 Nginx 是否运行**： 打开浏览器，访问你的云服务器的公网 IP 地址。如果安装成功，你应该会看到 Nginx 的默认欢迎页。

**4.修改 Nginx 配置**

```bash
sudo nano /etc/nginx/sites-available/default
```

```nginx
server {
        listen 80 default_server;
        listen [::]:80 default_server;

        # SSL configuration
        #
        # listen 443 ssl default_server;
        # listen [::]:443 ssl default_server;
        #
        # Note: You should disable gzip for SSL traffic.
        # See: https://bugs.debian.org/773332
        #
        # Read up on ssl_ciphers to ensure a secure configuration.
        # See: https://bugs.debian.org/765782
        #
        # Self signed certs generated by the ssl-cert package
        # Don't use them in a production server!
        #
        # include snippets/snakeoil.conf;

        root /var/www/image_hosting;
        index index.html;

        # Add index.php to the list if you are using PHP
        index index.html index.htm index.nginx-debian.html;

        server_name _;

         location / {
                # First attempt to serve request as file, then
                # as directory, then fall back to displaying a 404.
                try_files $uri $uri/ =404;
        }

        #限制上传的最大文件的大小
        client_max_body_size 50M;

         # 如果你有特定路径用于上传图片，可以这样设置：
        location /upload/ {
        alias /var/www/image_hosting/uploads/;
        # 上传时设置的权限
        autoindex on;
        client_max_body_size 50M;
    }
}
```

**5.重启Nginx**

```bash
sudo systemctl restart nginx
```

**6.创建图床目录**

```bash
sudo mkdir -p /var/www/images_hosting

#chown：改变文件或目录的拥有者
#-R：递归操作，意味着目录下的所有文件和子目录也都会更改所有权
sudo chown -R www-data:www-data /var/www/images_hosting

#chmod：改变文件或目录的权限。
#-R：递归操作，意味着目录下的所有文件和子目录都会应用该权限。
#755：文件权限的设置。755 表示文件所有者有读、写、执行的权限，而组成员和其他用户只有读和执行的权限。
#7 表示拥有者权限（读、写、执行）。
#5 表示组成员权限（读、执行）。
#5 表示其他用户权限（读、执行）。
sudo chmod -R 755 /var/www/images_hosting
```

**7.重启Nginx**

```bash
sudo systemctl restart nginx
```

**8.创建符号链接**

```bash
sudo ln -s /etc/nginx/sites-available/default /etc/nginx/sites-enabled

#检查符号链接
 ls -l /etc/nginx/sites-enabled/default
```

**9.测试 Nginx 配置**

```bash
sudo nginx -t
sudo systemctl restart nginx
#检查日志
journalctl -xeu nginx.service
```

