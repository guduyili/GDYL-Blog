---
title: MAC
date: 2024-10-15
updated: 2024-10-15
categories: 
- HCIA
tag:
- learning
---

<!-- toc -->

### **1.单播地址（Unicast Address）** ：

- 单播MAC地址特指网络中的一个唯一设备。
- 数据帧发往单播地址时，只有对应的设备会处理并响应。
- 它是最基本、最常用的MAC地址类型。

### **2.组播地址（Multicast Address）** ：

- 组播MAC地址用于指示一个设备组，允许数据在网络中被多个设备接收和处理。
- 在以太网中，MAC地址的最低位为1（即MAC地址的第一个字节最低位是1）通常表示该地址是一个组播地址。
- 应用场景包括视频会议、多媒体内容分发等，需要一对多的通信模式。

### **3.广播地址（Broadcast Address）** ：

- 广播MAC地址用于向网络中所有设备发送数据。
- 以太网中标准的广播地址为“FF:FF:FF:FF:FF:FF”。
- 使用它发送的数据包会被网络中所有设备接收到并处理。
- 广播是无选择的，对于资源优化不是很优，但在某些协议下是必须的，如ARP协议。

### **4.任意播地址（Anycast Address）** （注意在MAC地址层面通常不使用）：

- 任意播在IP模式中应用广泛，但在数据链路层（即MAC层）不常被直接使用。
- 概念上，任意播是一种允许数据发送给一组可能的接收者中的“最近”或“最有效”的一个。
- 在IPv6中，任意播地址被利用来优化路由，通常不涉及MAC地址直接操作。

------

## MAC地址表

MAC地址表是网络交换机用于记录和管理网络设备的MAC地址及其对应出端口的关键数据结构。它在网络的第二层（数据链路层）操作，帮助交换机进行高效的数据帧转发。以下是关于MAC地址表的详细解释：

### MAC地址表的功能

1. **数据帧转发**：
   - 当交换机接收到一个数据帧时，它会查看帧的目标MAC地址。
   - 交换机会查找MAC地址表，以确定目标MAC地址所对应的端口。
   - 如果找到了对应的端口，交换机会将数据帧转发到那个端口。
2. **学习过程**：
   - 当交换机接收到数据帧时，它会查看帧的源MAC地址。
   - 交换机会将源MAC地址及其接收到的端口记录在MAC地址表中。
   - 这种学习机制使得交换机能够动态更新MAC地址表，以适应网络拓扑的变化。
3. **防止网络环路**：
   - 通过使用生成树协议（STP）等协议，交换机可以防止网络中出现环路，避免MAC地址表中信息紊乱。

### MAC地址表的组成

一个典型的MAC地址表包含以下几项：

- **MAC地址**：设备的硬件地址，用于唯一标识网络接口。
- **端口号**：MAC地址对应的交换机端口号。
- **VLAN ID**（如果支持VLAN）：在支持虚拟局域网的交换机中，MAC地址表还会记录MAC地址所属的VLAN。
- **老化时间**：MAC地址表中的每一项都有一个老化计时器，如果在一定时间内没有接收到来自该MAC地址的数据帧，交换机会自动删除该条目。这有助于保持MAC地址表的更新和准确。

### MAC地址表的维护

- **动态学习**：交换机会自动学习并更新MAC地址表，通常不需要人工干预。
- **老化机制**：为了防止表中的陈旧数据，交换机会定期删除长时间未使用的条目。
- **静态条目**：在某些情况下，网络管理员可以手动配置静态MAC地址条目，以确保某些重要设备的MAC地址始终在表中。



------



### EUI-64详解与使用

**EUI-64（Extended Unique Identifier-64）是一种基于MAC地址生成IPv6地址的机制。**

EUI-64地址的生成步骤如下：

求一个MAC地位: 00E0-FCEF_0FEC的EUI-64地址

1. **拆分MAC地址**：
   - MAC地址由48位组成，前24位是组织唯一标识符（OUI），后24位是设备的唯一标识符。
   - 原MAC地址为：00E0-FCEF-0FEC，分为两部分：
     - 前24位：00E0FC
     - 后24位：EF0FEC
2. **插入FFFE**：
   - 将FFFE插入到MAC地址的中间位置，以形成64位地址：
     - 00E0-FCEF-0FEC → 00E0-FC-**FFFE**-EF-0FEC
     - 插入后的结果为：00E0-FCFF-FEEF-0FEC
3. **修改第7位**（即U/L位，Universal/Local位）：
   - MAC地址的第7位（U/L位）用于标识地址是全局唯一的还是本地管理的。EUI-64要求将该位取反。
   - 原MAC地址的前两个字符是**00**，其二进制形式为**00000000**。第7位是0，表示该地址是全局唯一的。取反后变为**1**，表示该地址是本地管理的。
   - 将第7位取反后，前两位变成**02**，所以生成的EUI-64地址的前缀变为**02E0**。

最终生成的EUI-64地址为：**02E0-FCFF-FEEF-0FEC**。

